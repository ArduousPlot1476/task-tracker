<!DOCTYPE html>
<html>
<!-- Previous head and style sections remain the same until the end -->
<head>
    <!-- Previous styles remain the same -->
    <style>
        /* Add to existing styles */
        .data-management {
            margin-top: 20px;
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .clear-button {
            background: #ff4444;
            color: white;
        }

        .clear-button:hover:not(:disabled) {
            background: #cc0000;
        }

        .save-button {
            background: #4CAF50;
            color: white;
        }

        .save-button:hover:not(:disabled) {
            background: #388E3C;
        }
    </style>
</head>
<body>
    <!-- Previous content remains the same until after the table -->
    <div class="container">
        <!-- Previous content -->
        <table>
            <!-- Previous table content -->
        </table>

        <div class="data-management">
            <button class="clear-button" onclick="clearHistory()">Clear History</button>
            <button class="save-button" onclick="saveToFile()">Save History</button>
        </div>
    </div>

    <script>
        // Add to existing JavaScript, just before the final script tag

        function clearHistory() {
            if (confirm('Are you sure you want to clear all history? This cannot be undone.')) {
                taskHistory = [];
                localStorage.setItem('taskHistory', JSON.stringify(taskHistory));
                currentTask = null;
                document.getElementById('completeBtn').disabled = true;
                document.getElementById('startBtn').disabled = false;
                saveAndRender();
            }
        }

        function saveToFile() {
            const data = {
                history: taskHistory,
                stats: {
                    tasksStarted: document.getElementById('tasksStarted').textContent,
                    tasksCompleted: document.getElementById('tasksCompleted').textContent,
                    completionRate: document.getElementById('completionRate').textContent
                },
                exportDate: new Date().toISOString()
            };

            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `task-history-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>
